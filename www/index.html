<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline';  media-src *;img-src * 'self' data: https:;" script-src 'self' https://cdn.firebase.com https://*.firebaseio.com; object-src 'self' "/>
<!--   <base href="https://crisnadeveloper.github.io/t-reto/www/ "> -->

	<title>t-reto</title>
	<link rel="stylesheet "type="text/css "href="css/jquery.mobile.icons.min.css "/> 

	<!--link rel="stylesheet "href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css "/-->
		<link rel="stylesheet "href="jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css ">
	<link rel="stylesheet "type="text/css "href="css/t-reto.min.css "/>

<link rel="stylesheet "type="text/css "href="css/images/icon-pack-custom.css "/>
	<link rel="stylesheet "type="text/css "href="css/scratch.css "/>



	<link rel="stylesheet "href="themes/alertify.core.css "/>
	<link rel="stylesheet "href="themes/alertify.default.css "id="toggleCSS "/>

<!-- 	<script src="http://code.jquery.com/jquery-1.9.1.js "></script> -->
	<script src="lib/alertify.min.js "></script>
	
	<!--NO OLVIDAR PONER-->

<!-- <script src="js/admob_simple.js "></script>  -->
<script src="js/scratch.js "></script> 
	
	
	<!-- Firebase App is always required and must be first -->
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-app.js "></script>
	<!-- Add additional services that you want to use -->
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-auth.js "></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-database.js "></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-firestore.js "></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-messaging.js "></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-functions.js "></script> 
	<!-- Comment out (or don't include) services that you don't want to use -->
	 <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-storage.js "></script> 
	 
	 <script src="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.js "></script>
<link type="text/css "rel="stylesheet "href="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.css "/>
	<script src="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth__es.js "></script>
<link type="text/css "rel="stylesheet "href="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.css "/>


<script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js "></script>
<link type="text/css "rel="stylesheet "href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css "/>




		<!-- <script src="firebase/firebase-auth.js "></script>
	<script src="firebase/firebase-database.js "></script>
	<script src="firebase/firebase-firestore.js "></script>
	<script src="firebase/firebase-messaging.js "></script>
	<script src="firebase/firebase-functions.js "></script> -->
	
	<!-- Comment out (or don't include) services that you don't want to use -->
	<!-- <script src="firebase/firebase-storage.js "></script> -->
	
 	<script src="jquery.mobile-1.4.5/jquery-1.10.2.min.js "></script>
	<script src="jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js "></script> 

<!-- 	<script src="http://code.jquery.com/jquery-1.10.2.min.js "></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js "></script> -->

	<script src="js/t-reto.js "></script>
	<script src="js/scratch.js "></script>
	

	
	<!--funcion para saber si ya esta logado-->
	<script>

		function initApp() {
			// Listening for auth state changes. 
			// [START authstatelistener] 
			firebase.auth().onAuthStateChanged(function (user) {

				if (user) {

					email = user.email;

					$.mobile.changePage("#inicio ", {
						transition:"slide ",
						reverse: true
					});
					leer_test(email);
					banner();
				} else {


					$.mobile.changePage("#login ", {
						transition:"slide ",
						reverse: true
					});


				}

			});
		}


		window.onload = function () {
			initApp();

			// otramaneralogin();

		};


	</script>
	
</head>

<body data-theme="b ">

	<!--INICIO-->
<div data-role="page "id="login ">
		<div data-role="header "data-theme="b ">t-reto: Login</div>
			<div data-role="content "data-theme="b ">
	
		
		<div id="firebaseui-auth-container "></div> 


			<div id="test "class="ui-content ui-alt-icon ui-page-theme-b ui-shadow-icon ">
						<h1>¿Que puedo hacer con t-reto?</h1>
						<div style="display:flex "><div style="display:inline-flex;padding:7px 6px "><button class="ui-btn ui-icon-edit ui-shadow ui-corner-all ui-btn-icon-notext "></button></div>	<div style="display:inline-flex;padding:7px 6px "> Crear Retos  para preguntar</div></div>
						<div style="display:flex "><div style="display:inline-flex;padding:7px 6px "><button class="ui-btn ui-icon-comments-o ui-shadow ui-corner-all ui-btn-icon-notext "></button></div>	<div style="display:inline-flex;padding:7px 6px ">Puedes Contestar los Retos</div></div>
						<div style="display:flex "><div style="display:inline-flex;padding:7px 6px "><button class="ui-btn ui-icon-bar-chart-o ui-shadow ui-corner-all ui-btn-icon-notext "></button></div>	<div style="display:inline-flex;padding:7px 6px ">Puedes ver tus resultados y los de tus amigos/alumnos</div></div>
						<div style="display:flex "><div style="display:inline-flex;padding:7px 6px "><button class="ui-btn ui-icon-group ui-shadow ui-corner-all ui-btn-icon-notext "></button></div>	<div style="display:inline-flex;padding:7px 6px ">Puedes añadir amigos</div></div>
						<div style="display:flex "><div style="display:inline-flex;padding:7px 6px "><button class="ui-btn ui-icon-external-link3 ui-shadow ui-corner-all ui-btn-icon-notext "></button></div>	<div style="display:inline-flex;padding:7px 6px ">Si pasas el reto verás el premio o código de desbloqueo</div></div>
							
			</div>		
			
	
		</div>
		

</div>


<!-- PAGINA INICIO-->
<div data-role="page "id="inicio ">

		<div data-role="header "data-theme="b> t-reto
    <a onclick="desconectar()" data-role="button" data-theme="b" data-icon="power" data-iconpos="notext" class="ui-btn-right"> </a>
    <label for='usuario' id='usu'> </label>
    </div>

    <div data-role="content" data-theme="b">

        <fieldset data-role="controlgroup">
            <legend>Retos para mis amigos:</legend>

            <!--aquí va la imagen-->
            <ul data-role="listview" data-inset="true" data-theme="b" data-dividertheme="a" id="listatests">

                <li data-role="list-divider">Mis retos:</li>

            </ul>

            <legend>Te han retado a:</legend>



            <!--aquí va la imagen-->
            <ul data-role="listview" data-inset="true" data-theme="b" data-dividertheme="a" id="listacompartidos">

                <li data-role="list-divider">Mis retos:</li>
            </ul>
        </fieldset>





        <div data-role="footer" data-theme="b" data-position="fixed">




            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">
                    <li class="ui-block-a"><a href="#num_preg" data-role="button" data-transition="flip" data-icon="edit" onClick="limpiarCrearTest()">Crear</a></li>

                    <li class="ui-block-b"><a href="#annadir_alumno" data-role="button" data-transition="flip" data-icon="group">añadir</a></li>
                    <li class="ui-block-c"><a href="#resultados" data-role="button" data-transition="flip" onClick="cargarResultados()" data-icon="bar-chart-o">resultados</a></li>
                    <!-- <li class="ui-block-d"><a href="#ayuda" data-role="button"data-transition="flip"data-icon="info">Ayuda</a></li> -->
                </ul>
            </div>
        </div>

    </div>

    </div>

    <!--FIN INICIO-->






    <!---preguntas-->

    <div data-role="page" id="preguntas">
        <div data-role="header" data-theme="b" id="cabpreguntas"></div>

        <div data-role="content" data-theme="b">




            <label for="pregunta">Que quieres que le salga de pregunta:</label>
            <textarea name="pregunta" id="pregunta"></textarea>




            <input type="text" id="opcion1" placeholder="Texto de la Opción 1" required>

            <label for="radio1" style="display:none"></label>

            <input type='radio' name='respuesta' id='radio1' value="1" style="visibility:hidden">
            <a data-role="button" data-transition="flip" id="guardar1" onclick="guardoRespuesta(1)" data-icon="save"></a>
            </input>

            <input type="text" id="opcion2" placeholder="Texto de la Opción 2">

            <label for="radio2" style="display:none"></label>

            <input type='radio' name='respuesta' id='radio2' value="2" style="visibility:hidden"></input>
            <a data-role="button" data-transition="flip" id="guardar2" onclick="guardoRespuesta(2)" data-icon="save"></a>

            <input type="text" id="opcion3" placeholder="Texto de la Opción 3">

            <label for="radio3" style="display:none" style="visibility:hidden"></label>

            <input type='radio' name='respuesta' id='radio3' value="3" style="visibility:hidden"></input>
            <a data-role="button" data-transition="flip" id="guardar3" onclick="guardoRespuesta(3)" data-icon="save"></a>

            <input type="text" id="opcion4" placeholder="Texto de la Opción 4">

            <label for="radio4" style="display:none"></label>

            <input type='radio' name='respuesta' id='radio4' value="4" style="visibility:hidden"></input>
            <a data-role="button" data-transition="flip" id="guardar4" onclick="guardoRespuesta(4)" data-icon="save"></a>
            <div id="selrespu"></div>



        </div>




        <div id="divNivel" data-role="footer" data-theme="b"> </div>
        <div data-role="footer" data-theme="b" data-position="fixed">

            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">
                    <li class="ui-block-a"><a href="#pregunta" id="sigpreg" data-role="button" data-transition="flip" onClick="crear_pregunta()" data-icon="arrow-circle-right">Siguiente</a></li>
                    <li class="ui-block-b"><a href="#num_preg" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>
                    <li class="ui-block-c"><a data-role="button" data-transition="flip" onclick="terminar_test()" data-icon="home">Terminar</a></li>
                    <!-- 				<li class="ui-block-d"><a href="#ayuda" data-role="button"data-transition="flip"data-icon="info">Ayuda</a></li> -->
                </ul>
            </div>
        </div>
    </div>

    <!--FIN preguntas-->


    <!---respuestas-->

    <div data-role="page" id="realizartest">
        <div data-role="header" data-theme="b" id="cabcuestionario"></div>

        <label for="pregcuestion" id="pregcuestion"></label>
        <form id="formuresp" data-theme="b" method="get">

        </form>



        <div id="piepregunta" data-role="footer" data-theme="b"> </div>
        <div data-role="footer" data-theme="b" data-position="fixed">
            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">

                    <li class="ui-block-b"> <a href="#inicio" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>
                    <li class="ui-block-c"> <a data-role="button" data-transition="flip" onclick="terminar_respuesta()" data-icon="home">Terminar</a></li>
                    <!-- 				<li class="ui-block-d">	<a href="#ayuda"data-role="button"data-transition="flip"data-icon="info">Ayuda</a></li>
 -->
                </ul>
            </div>
        </div>
    </div>

    <!--FIN preguntas-->



    <!---VER PREGUNTAS-->

    <div data-role="page" id="ver_preguntas">

        <div data-role="header" data-theme="b">t-reto</div>



        <div data-role="content" data-theme="b">
            <!--aquí va la imagen-->
            <div data-role="listview" data-inset="true" data-theme="b" data-dividertheme="b" id="listapreguntas">
            </div>

        </div>

        <div data-role="footer" data-theme="b" data-position="fixed">
            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">

                    <li class="ui-block-a"><a href="#inicio" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>
                    <li class="ui-block-c"><a href="#inicio" data-role="button" data-transition="flip" id="botonborrar" onclick="borrarTest(id_test)" data-icon="trash-o">Borrar</a></li>
                    <li class="ui-block-b"><a href="#amigos" onclick="cargarListaAmigos()" data-role="button" data-transition="flip" data-icon="share-square-o">compartir</a></li>
                    <li class="ui-block-d"><a data-role="button" data-transition="flip" onclick="hacerTest(numpregcuestion,id_test,nombre,numrespaprobar)" data-icon="comments-o">Contestar</a></li>
                    <!-- 				<li class="ui-block-e"><a href="#ayuda"data-role="button"data-transition="flip"data-icon="info">Ayuda</a></li>
 -->
                </ul>
            </div>
        </div>

    </div>


    <!--FIN VER PREGUNTAS-->










    <!--NUM_PREG-->

    <div data-role="page" id="num_preg">

        <div data-role="header" data-theme="b">Creación del Test</div>



        <div data-role="content" data-theme="b">
            <!--comprobacion que el num_preg>que el de aciertos-->
            <label for="nomtest">Nombre del test:</label>
            <textarea name="nomtest" id="nomtest"></textarea>
            <label for="aciertos">Respuestas correctas necesarias para aprobar:</label>
            <textarea name="aciertos" id="aciertos"></textarea>
            <label for="repetir">¿Quieres que pueda repetir el test?:</label>
            <fieldset data-role="controlgroup" data-type="horizontal">
                <input type="radio" name="repetir" id="no" value="choice-1" checked="checked" />
                <label for="no">No</label>

                <input type="radio" name="repetir" id="si" value="choice-2" />
                <label for="si">si</label>
            </fieldset>
            <label for="premio">PREMIO(Código o frase que quieres que aparezca si aprueba):</label>
            <textarea name="premio" id="premio"></textarea>


            <label for="listacategorias">Selecciona la categoría:</label>

            <select name="listacategorias" id="listacategorias" data-theme="b">
						<option value='--' selected >Seleccione una categoría...</option>
				</select>


            <label for="listaedades">Selecciona la edad:</label>
            <select name="listaedades" id="listaedades" data-theme="b">
			<option value='--'  selected >Seleccione una edad...</option>
					
				</select>

        </div>

        <div data-role="footer" data-theme="b" data-position="fixed">

            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">
                    <li class="ui-block-a"><a data-role="button" data-transition="flip" onClick="crear_test()" data-icon="check-square-o">Crear</a></li>
                    <li class="ui-block-b"><a href="#inicio" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>
                    <!-- 					<li class="ui-block-c"><a href="#ayuda" data-role="button"data-transition="flip"data-icon="info">Ayuda</a></li>
 -->
                </ul>
            </div>
        </div>

    </div>

    <!--FIN NUM_PREG-->





    <!--COMPARTIR-->

    <div data-role="page" id="compartir">

        <div data-role="header" data-theme="b">Preguntas</div>



        <div data-role="content" data-theme="b">
            <!--comprobacion que el num_preg>que el de aciertos-->
            ¿QUIERES COMPARTIR ESTE TEST?

        </div>

        <div data-role="footer" data-theme="b" data-position="fixed">
            <a href="#amigos" data-role="button" data-transition="flip">SI</a>
            <a href="#inicio" data-role="button" data-transition="flip">NO</a>
            <!-- 					<a href="#ayuda"data-role="button"data-transition="flip"data-icon="info">Ayuda</a>
 --></div>

    </div>

    <!--COMPARTIR-->



    <!--AMIGOS-->

    <div data-role="page" data-theme='b' id="amigos">

        <div data-role="header" data-theme="b">Alumnos</div>
        <div data-theme="b" id="divamigos" data-form="ui-body-b">

        </div>




        <div data-role="footer" data-theme="b" data-position="fixed">
            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">

                    <li class="ui-block-a"> <a data-role="button" data-transition="flip" onClick="compartirTest()" data-icon="share-square-o">compartir</a></li>
                    <li class="ui-block-b"> <a href="#inicio" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>
                    <!-- 				<li class="ui-block-c">	<a href="#ayuda"data-role="button"data-transition="flip"data-icon="info">Ayuda</a></li>
 -->
                </ul>
            </div>
        </div>

    </div>

    <!--amigos-->








    <!--REGISTRARSE-->

    <div id="registro" data-role="page" data-theme="b">
        <div data-role="header" data-theme="b" data-theme="b">
            <h1>Registrase </h1>
        </div>

        <div data-role="content" data-theme="b">
            <form name="registrarse">
                <label for="usuarionuevo">Usuario(correo):</label>
                <input type="text" name="usuarionuevo" id="usuarionuevo" />



                <label for="passwordnuevo">Password:</label>
                <input name="passwordnuevo" id="passwordnuevo" type="password" value="" autocomplete="off" data-clear-btn="true">



            </form>
        </div>

        <div data-role="footer" data-theme="b" data-position="fixed">
            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">

                    <li class="ui-block-a"><a data-role="button" data-transition="flip" onClick="aceptar_registro()" data-icon="check-square-o">Aceptar</a></li>
                    <li class="ui-block-b"><a href="#login" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>

                </ul>
            </div>
        </div>

    </div>



    <!--FIN REGISTRARSE-->



    <!--AÑADIR ALUMNO-->

    <div id="annadir_alumno" data-role="page" data-theme="b">
        <div data-role="header" data-theme="b" data-theme="b">
            <h1>Añadir alumno </h1>
        </div>

        <div data-role="content" data-theme="b">
            <form name="registrarse">
                <label for="alumnonuevo">Usuario(correo):</label>
                <input type="text" name="alumnonuevo" id="alumnonuevo" />
                <label for="apodonuevo">Apodo:</label>
                <input type="text" name="apodonuevo" id="apodonuevo" />
            </form>
        </div>

        <div data-role="footer" data-theme="b" data-position="fixed">

            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">
                    <li class="ui-block-a"><a data-role="button" data-transition="flip" onClick="annadirAlumno()" data-icon="check-square-o">Aceptar</a></li>
                    <li class="ui-block-b"><a href="#inicio" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>
                    <!-- 						<li class="ui-block-c"><a href="#ayuda"data-role="button"data-transition="flip"data-icon="info">Ayuda</a></li>
 -->
                </ul>
            </div>



        </div>
    </div>
    <!--RESULTADO EXAMEN-->

    <div class="scratch-container" id="contenedorPromo">

    </div>

    <!--FIN RESULTADO EXAMEN-->


    <!---VER resultados estadistidas-->

    <div data-role="page" data-theme="b" id="resultados">

        <div data-role="header" data-theme="b">t-reto: Resultados de los tests</div>


        <select name="listaalumnos" id="listaalumnos" data-theme="b" onChange="cargarTestAlumno()">
				<option  value='--' >Seleccione un Alumno...</option>
			</select>

        <table data-role="table" data-theme="b" id="tablaresultados" data-mode="columntoggle" class="ui-responsive ui-body-d table-stripe" data-column-btn-text="Selecione Filtro" data-column-btn-theme="b">
            <thead>
                <tr class='ui-bar-d' id='trtest'>
                    <th>
                        <h4>Nombre</h4>
                    </th>
                    <th data-priority='1'>
                        <h4>Aprobado</h4>
                    </th>
                    <th data-priority='2'>
                        <h4>Fecha</h4>
                    </th>
                    <th data-priority='3'>
                        <h4>Aciertos</h4>
                    </th>
                    <th data-priority='4'>
                        <h4>Total preguntas</h4>
                    </th>
                    <th data-priority='5'>
                        <h4>Aciertos Necesarios</h4>
                    </th>

                </tr>
            </thead>
            <tbody id='tbodyresultado'>
            </tbody>
        </table>


        <div data-role="footer" data-theme="b" data-position="fixed">

            <div class="ui-navbar" role="navigation" data-role="navbar" data-theme="a" data-mini="true">
                <ul class="ui-grid-d">
                    <li class="ui-block-a"><a href="#inicio" data-role="button" data-transition="flip" data-icon="back">Volver</a></li>
                    <!-- 					<li class="ui-block-b"><a href="#ayuda"data-role="button"data-icon="info"data-transition="flip">Ayuda</a></li>
 -->
                </ul>
            </div>
        </div>

    </div>



    <!--FIN resultados estadistidas-->



    </body>

</html>